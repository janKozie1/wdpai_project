(()=>{"use strict";var e=function(e){return null==e},n=function(n){return!e(n)};function t(n){return null==n||!(!function(e){return"string"==typeof e}(n)||""!==n.trim())||!(!function(n){return"object"==typeof n&&!e(n)&&(null===Object.getPrototypeOf(n)||null===Object.getPrototypeOf(Object.getPrototypeOf(n)))}(n)||0!==Object.keys(n).length)||!(!Array.isArray(n)||0!==n.length)}var r="drawer--expanded";var o="data-error-container",a=function(n,t){t.forEach((function(t){var r,a,u,c=(r=n.querySelector('[name="'.concat(t.name,'"]')),e(r)?null:r instanceof HTMLInputElement&&"radio"===r.type?null===(u=null===(a=null==r?void 0:r.parentElement)||void 0===a?void 0:a.parentElement)||void 0===u?void 0:u.parentElement:r.parentElement);null==c||c.appendChild(function(e){var n=document.createElement("div");n.classList.add("-pl--700","-mt--400"),n.setAttribute(o,"true");var t=document.createElement("span");t.classList.add("text__paragraph--small--regular");var r=document.createElement("span");return r.classList.add("-color--state_error"),r.textContent=e,t.appendChild(r),n.appendChild(t),n}(t.error))}))};var u="Field must not be empty",c=function(n){return!e(n)&&n instanceof File},i=function(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return!e.apply(void 0,n)}},l=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,c)}i((r=r.apply(e,n||[])).next())}))},s=function(e,n){var t,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=n.call(e,u)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};document.addEventListener("DOMContentLoaded",(function(){var d,f,p,m=function(n){var t=n.name,o=n.containerNode,a=void 0===o?document.body:o,u=a.querySelector("#drawer--".concat(t)),c=a.querySelector("button#drawer_button--".concat(t));if(!e(u)&&!e(c)){var i,l=function(e){var n,t,o=e.drawer,a=function(e){e?o.root.classList.add(r):o.root.classList.remove(r)};return e.button.addEventListener("click",(function(){return a(!0)})),null===(n=o.cancelButton)||void 0===n||n.addEventListener("click",(function(){return a(!1)})),null===(t=o.xButton)||void 0===t||t.addEventListener("click",(function(){return a(!1)})),a}({button:c,drawer:(i=u,{root:i,xButton:i.querySelector('button[data-drawer-node="xButton"]'),cancelButton:i.querySelector('button[data-drawer-node="cancelButton"]')})});return{open:function(){return l(!0)},close:function(){return l(!1)}}}}({name:"editItem"}),v={open:function(e){}};null===(d=document.querySelector("button#button--delete"))||void 0===d||d.addEventListener("click",(f=m,p=v,function(){return l(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch(location.pathname,{method:"DELETE"})];case 1:return[4,e.sent().json()];case 2:return e.sent().ok?(f.close(),location.replace("/pantry")):p.open("Something went wrong"),[3,4];case 3:return e.sent(),p.open("Something went wrong"),[3,4];case 4:return[2]}}))}))})),function(r){var u=r.formName,c=r.onSuccess,i=r.containerNode,l=void 0===i?document.body:i,s=r.fieldValidations,d=l.querySelector("#form--".concat(u));!e(d)&&d instanceof HTMLFormElement&&d.addEventListener("submit",(function(r){var u=new FormData(d);r.preventDefault(),function(e,n){Object.keys(n).forEach((function(n){var t=e.querySelector('[name="'.concat(n,'"] + [').concat(o,"]"));null==t||t.remove()}))}(d,s);var i=function(t,r){return Object.entries(r).map((function(n){var r=n[0],o=n[1],a=t.get(r),u=o.find((function(e){return!e.fn(a)}));return e(u)?null:{name:r,error:u.error}})).filter(n)}(u,s);t(i)?c(u,(function(e){return a(d,e)})):a(d,i)}))}({formName:"editItem",onSuccess:function(n,t){return l(void 0,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch(location.pathname,{method:"POST",body:n})];case 1:return[4,o.sent().json()];case 2:return r=o.sent(),e(r)?[2,v.open("Something went wrong, try again later")]:(r.isValid&&!e(r.validData)?(m.close(),location.reload()):t(Object.entries(r.messages).map((function(e){var n=e[0];return{error:e[1],name:n}}))),[3,4]);case 3:return o.sent(),[2,v.open("Something went wrong, try again later")];case 4:return[2]}}))}))},fieldValidations:{name:[{error:u,fn:i(t)}],image:[{error:"Field must be a valid file",fn:c}],description:[{error:u,fn:i(t)}],unit:[{error:u,fn:i(t)}]}})}))})();